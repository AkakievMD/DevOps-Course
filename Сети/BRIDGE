BRIDGE
Прозрачное устройство OSI Layes 2
Bridge разделяет область коллизий на две части
Традиционно используется для соединения двух сегментов сети
Сетевой switch это multi-port bridge - каждый порт является доменом коллизий одного устройства

BRIDGE
• Для устройств ничего не изменилось, но теперь мы используем две области коллизий
• Все хосты по-прежнему могут взаимодействовать друг с другом
• Теперь есть две области коллизий

Bridge таблица коммутации стандарт IEEE 802.1D
• Изначально таблица коммутации пуста.
• При включении питания, одновременно с передачей данных, коммутатор начинает изучать расположение подключенных к нему сетевых устройств путем анализа МАС-адресов источников (SRC MAC) получаемых кадров.

• Дополнительно к МАС-адресу и ассоциированному с ним порту в таблицу коммутации для каждой записи заносится время старения
(aging time).
• Каждый раз, когда идет обращение по какому-либо МАС-адресу, соответствующая запись получает новое время старения.
• Записи, к которым не обращались долгое время, из таблицы удаляются.

Что можно добавлять в bridge
• Физические интерфейсы: ethernet, sf, wifi (при поддержке)
• Виртуальные интерфейсы: VLAN, QnQ VLAN
• ТАР интерфейсы (OpenVPN)
• Интерфейсы виртуальных машин и контейнеров
• Некоторые туннельные интерфейсы при поддержке определенных протоколов (PPTP, L2tp, PPPoe + BCP)
• Специфичные туннельные интерфейсы (L2tpv3)
• Для всех интерфейсов важно передавать 12 кадры и иметь одинаковый MTU - bridge не умеет фрагментировать
• Чаще всего Linux bridge используется для управления сетями для виртуальных машин и контейнеров
• Иногда пустой bridge используется как loopback интерфейс
• При использовании протокола STP можно получить отказоустойчивую схему
• Стоит понимать, что linux bridge - это софтовая реализация, работающая в ядре linux, но которая не сможет сравниться по производительности с аппаратными
коммутаторами
• Linux bridge поддерживает фильтрацию 12 ebtables
• Некоторые функции не реализованы
