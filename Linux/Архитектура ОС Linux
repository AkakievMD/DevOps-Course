Ядро linux

1) Модули ядра - динамически загружаемые части ядра.
2) Взаимодействие ядра и пользовательского окружения
3) Псевдо ФС, предоставляемые ядром. /dev, /sys, /proc.

Ядро - центральная часть операционной системы, управляющая выполнением процессов, ресурсами вычислительной системы и предоставляющая процессам координированный доступ к этим ресурсам.
Основными ресурсами являются процессорное время, память и устройства ввода-вывода. Доступ к сайловой системе и сетевое взаимодействие также могут быть реализованы на уровне ядра.

Дескрипторы

1) Дескриптор - это идентификатор ресурса ввода/вывода
2) Стандартные дескрипторы - 0 (stdin), 1 (stdout), 2 (stderr)
3) Прочие дескрипторы выделяются для открытых файлов, установленных сетевых соединений и т.д.
4) /proc/<pid>/fd, /proc/<pid>/fdinfo, /proc/net/*, содержат Информацию об открытых дескрипторах процесса
5) lsof - утилита для просмотра дескрипторов процесса

Системные вызовы

1) Системный вызов - это механизм взаимодействия ядра и приложения
2) Как работают системные вызовы. linux-vdso.so
3) Отслеживание системных вызовов. Команда strace
4) Если процесс не делает системных вызовов, но потребляет ресурсы, как понять, чем он занимается? Утилита pstack
5) Нужна отладочная информация, yum install --enablerepo=base-debuginfo glibc-debuginfo, теперь видно гораздо больше

Системные вызовы
Это интерфейс взаимодействия программ с ядром
Все процессы в Linux делают системные вызовы
Системные вызовы можно отследить при помощи утилиты strace

Типы namespaces
groups - изоляция cgroups
IPC - изоляция очередей сообщений
network - изоляция сетевого окружения
mount - изоляция точек монтирования файловых систем
PID - изоляция древа процессов
Time - изоляция системных часов
User - изоляция таблицы пользователей
UTS - изоляция настроек доменного имени

Подсистемы cgroups v1
bikio - лимиты на чтение/запись устройств
сри - настройки шедулера процессора
cpuacct - отчёты об использовании ресурсов процессора
cpuset - ограничение на использование ядер процессора
memory - выделение памяти для процессов
net prio - настройка приоритета трафика
pids - максимальное количество процессов в группе
perf_event - мониторинг ресурсов группы

Подсистемы cgroups v2
io - ограничение на чтение/запись
memory - выделение памяти для процессов
pids - максимальное количество процессов в группе
сри - настройка шедулера и генерация отчётов CPU
cruset - ограничение на использование ядер процессора
perf event - мониторинг ресурсов группы



